{
  "rules": {
    ".read": false,
    ".write": false,
    
    "checkins": {
      ".read": true,
      ".write": true,
      ".indexOn": ["timestamp", "employeeId", "type"],
      "$checkinId": {
        "employeeId": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "employeeName": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "type": {
          ".validate": "newData.isString() && (newData.val() === 'in' || newData.val() === 'out')"
        },
        "timestamp": {
          ".validate": "newData.isString() && newData.val().matches(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/)"
        },
        "photoBase64": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "photoURL": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "location": {
          "lat": {
            ".validate": "newData.isNumber() && newData.val() >= -90 && newData.val() <= 90"
          },
          "lng": {
            ".validate": "newData.isNumber() && newData.val() >= -180 && newData.val() <= 180"
          },
          "address": {
            ".validate": "newData.isString()"
          }
        },
        "wifi": {
          "ssid": {
            ".validate": "newData.isString() && newData.val().length > 0"
          },
          "verified": {
            ".validate": "newData.isBoolean()"
          },
          "publicIP": {
            ".validate": "newData.isString() || newData.val() === null"
          },
          "localIP": {
            ".validate": "newData.isString() || newData.val() === null"
          },
          "connectionType": {
            ".validate": "newData.isString()"
          }
        }
      }
    },

    "employees": {
      ".read": true,
      ".write": true,
      ".indexOn": ["fullName", "department", "team", "active"],
      "$employeeId": {
        "fullName": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 100"
        },
        "department": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "team": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "position": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "branch": {
          ".validate": "newData.isString() || newData.val() === null"
        },
        "active": {
          ".validate": "newData.isBoolean()"
        },
        "createdAt": {
          ".validate": "newData.isString() && newData.val().matches(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/)"
        }
      }
    },

    "companyWifis": {
      ".read": true,
      ".write": true,
      ".indexOn": ["name", "createdAt"],
      "$wifiId": {
        "name": {
          ".validate": "newData.isString() && newData.val().length > 0 && newData.val().length <= 50"
        },
        "publicIP": {
          ".validate": "(newData.isString() && newData.val().matches(/^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$/)) || newData.val() === null"
        },
        "localIP": {
          ".validate": "(newData.isString() && newData.val().matches(/^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$/)) || newData.val() === null"
        },
        "createdAt": {
          ".validate": "newData.isString() && newData.val().matches(/^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{3}Z$/)"
        }
      }
    },

    "workSettings": {
      ".read": true,
      ".write": true,
      "global": {
        "standardCheckin": {
          ".validate": "newData.isString() && newData.val().matches(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)"
        },
        "standardCheckout": {
          ".validate": "newData.isString() && newData.val().matches(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)"
        },
        "lunchStart": {
          ".validate": "newData.isString() && newData.val().matches(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)"
        },
        "lunchEnd": {
          ".validate": "newData.isString() && newData.val().matches(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)"
        },
        "standardHours": {
          ".validate": "newData.isNumber() && newData.val() > 0 && newData.val() <= 24"
        }
      }
    },

    "workRecords": {
      ".read": true,
      ".write": true,
      ".indexOn": [".key"],
      "$date": {
        "$employeeId": {
          "employeeId": {
            ".validate": "newData.isString() && newData.val().length > 0"
          },
          "employeeName": {
            ".validate": "newData.isString() && newData.val().length > 0"
          },
          "status": {
            ".validate": "newData.isString() && (newData.val() === 'OK' || newData.val() === 'Late' || newData.val() === 'Early' || newData.val() === 'Late & Early' || newData.val() === 'Incomplete')"
          },
          "totalHours": {
            ".validate": "newData.isNumber() && newData.val() >= 0 && newData.val() <= 24"
          },
          "late": {
            ".validate": "newData.isBoolean()"
          },
          "earlyDeparture": {
            ".validate": "newData.isBoolean()"
          },
          "firstIn": {
            ".validate": "newData.isNumber() || newData.val() === null"
          },
          "lastOut": {
            ".validate": "newData.isNumber() || newData.val() === null"
          }
        }
      }
    }
  }
}